{
  "displayName": "Milvus Overview",
  "mosaicLayout": {
    "columns": 48,
    "tiles": [
      {
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "increase(milvus_proxy_slow_query_count{${Cluster},${Namespace}}[1m])",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Slow Query (in 1m)",
          "id": ""
        }
      },
      {
        "xPos": 16,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_req_count{${Cluster},${Namespace},status=\"success\"}[1m])) by(function_name) ",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Successful Requests  (in 1m)",
          "id": ""
        }
      },
      {
        "xPos": 32,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_req_count{${Cluster},${Namespace}, status!~\"success|total\"}[1m])) by(function_name) ",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Failed Requests  (in 1m)",
          "id": ""
        }
      },
      {
        "xPos": 32,
        "yPos": 16,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (location,cluster_name,namespace_name,pod_name,container_name)(avg_over_time(kubernetes_io:container_memory_used_bytes{monitored_resource=\"k8s_container\",memory_type=\"non-evictable\",pod_name=~\"milvus.*\",${Cluster},${Namespace}}[${__interval}]))",
                  "unitOverride": "By",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Memory Usage",
          "id": ""
        }
      },
      {
        "yPos": 32,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "rate(kubernetes_io:container_cpu_core_usage_time{monitored_resource=\"k8s_container\",${Cluster},${Namespace}, pod_name=~\"milvus.*\"}[${__interval}])",
                  "unitOverride": "%",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "CPU Usage",
          "id": ""
        }
      },
      {
        "xPos": 16,
        "yPos": 16,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(rate(milvus_storage_op_count{${Cluster},${Namespace}}[1m])) by (persistent_data_op_type, status)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Storage Request Rate",
          "id": ""
        }
      },
      {
        "xPos": 32,
        "yPos": 32,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(rate(milvus_msgstream_op_count{${Cluster},${Namespace}}[1m])) by (message_op_type, status)"
                },
                "plotType": "LINE",
                "targetAxis": "Y1"
              }
            ],
            "chartOptions": {
              "mode": "COLOR",
              "displayHorizontal": false
            },
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          },
          "title": "Message Request Rate"
        }
      },
      {
        "xPos": 16,
        "yPos": 32,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(rate(internal_storage_kv_size_count{${Cluster},${Namespace}}[1m])) by (persistent_data_op_type)"
                },
                "plotType": "LINE",
                "targetAxis": "Y1"
              }
            ],
            "chartOptions": {
              "mode": "COLOR",
              "displayHorizontal": false
            },
            "thresholds": [],
            "yAxis": {
              "scale": "LINEAR"
            }
          },
          "title": "Storage Operation Throughput[cpp]"
        }
      },
      {
        "yPos": 48,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_search_vectors_count{${Cluster},${Namespace}}[2m])/120) by (pod, node_id)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(rate(milvus_proxy_search_vectors_count{${Cluster},${Namespace}}[1m]))",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Search Vector Count Rate",
          "id": ""
        }
      },
      {
        "xPos": 16,
        "yPos": 48,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_insert_vectors_count{${Cluster},${Namespace}}[2m])/120) by (pod, node_id)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Insert Vector Count Rate",
          "id": ""
        }
      },
      {
        "xPos": 32,
        "yPos": 48,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.99, sum by (le, query_type, node_id) (rate(milvus_proxy_sq_latency_bucket{${Cluster},${Namespace}}[2m])))",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_sq_latency_sum{${Cluster},${Namespace}}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_sq_latency_count{${Cluster},${Namespace}}[2m])) by (pod, node_id, query_type)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Search Latency",
          "id": ""
        }
      },
      {
        "yPos": 64,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.99, sum by (le, query_type, node_id, collection_name) (rate(milvus_proxy_collection_sq_latency_bucket{${Cluster},${Namespace}, ${collection}}[2m])))",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_proxy_collection_sq_latency_sum{${Cluster},${Namespace}, ${collection}}[2m])) by (pod, node_id, query_type) / sum(increase(milvus_proxy_collection_sq_latency_count{${Cluster},${Namespace}, ${collection}}[2m])) by (pod, node_id, query_type)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Collection Search Latency",
          "id": ""
        }
      },
      {
        "xPos": 16,
        "yPos": 64,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "histogram_quantile(0.99, sum by (le, pod) (rate(milvus_msgstream_request_latency_bucket{${Cluster},${Namespace}, message_op_type=\"produce\"}[2m])))",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              },
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(increase(milvus_msgstream_request_latency_sum{${Cluster},${Namespace}, message_op_type=\"produce\"}[2m])) by (pod) / sum(increase(milvus_msgstream_request_latency_count{${Cluster},${Namespace}, message_op_type=\"produce\"}[2m])) by (pod)",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "MQ Send Latency",
          "id": ""
        }
      },
      {
        "yPos": 16,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum by (pod, function_name) (rate(milvus_proxy_req_in_queue_latency_bucket{${Cluster},${Namespace}}[2m]))",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Queries Latency",
          "id": ""
        }
      },
      {
        "xPos": 32,
        "yPos": 64,
        "width": 16,
        "height": 16,
        "widget": {
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "prometheusQuery": "sum(milvus_rootcoord_collection_num{${Cluster},${Namespace}})",
                  "unitOverride": "",
                  "outputFullDuration": false
                },
                "plotType": "LINE",
                "legendTemplate": "",
                "targetAxis": "Y1",
                "dimensions": [],
                "measures": [],
                "breakdowns": []
              }
            ],
            "thresholds": [],
            "yAxis": {
              "label": "",
              "scale": "LINEAR"
            },
            "chartOptions": {
              "mode": "COLOR",
              "showLegend": false,
              "displayHorizontal": false
            }
          },
          "title": "Collection amount",
          "id": ""
        }
      }
    ]
  },
  "dashboardFilters": [
    {
      "labelKey": "namespace",
      "templateVariable": "Namespace",
      "stringValue": "",
      "filterType": "RESOURCE_LABEL",
      "valueType": "STRING"
    },
    {
      "labelKey": "cluster",
      "templateVariable": "Cluster",
      "stringValue": "",
      "filterType": "RESOURCE_LABEL",
      "valueType": "STRING"
    },
    {
      "labelKey": "collection_name",
      "templateVariable": "collection",
      "stringValue": "",
      "filterType": "METRIC_LABEL",
      "valueType": "STRING"
    }
  ],
  "labels": {
    "goog-imported-via-script": "",
    "goog-imported-grafana-revision": "3",
    "cloud-monitoring-dashboard-importer": "",
    "goog-imported-grafana-dashboard-from-ui": "",
    "goog-imported-grafana-dashboard": ""
  }
}